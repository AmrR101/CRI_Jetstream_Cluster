#cloud-config
# vim: syntax: yaml

yum_repos:
  # The name of the repository
  OpenHPC:
    baseurl: http://build.openhpc.community/OpenHPC:/1.3/CentOS_7
    enabled: true
    gpgcheck: true
    gpgkey: file:///etc/pki/rpm-gpg/RPM-GPG-KEY-OpenHPC-1
    name: OpenHPC-1.3 - Base
  OpenHPC-updates:
    name: OpenHPC-1.3 - Updates
    baseurl: http://build.openhpc.community/OpenHPC:/1.3/updates/CentOS_7
    gpgcheck: true
    enabled: true
    gpgkey: file:///etc/pki/rpm-gpg/RPM-GPG-KEY-OpenHPC-1
  Epel:
    name: Extra Packages for Enterprise Linux 7 - $basearch
    metalink: https://mirrors.fedoraproject.org/metalink?repo=epel-7&arch=$basearch
    failovermethod: priority
    enabled: true
    gpgcheck: true
    gpgkey: file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7

write_files:
  - content: |
      -----BEGIN PGP PUBLIC KEY BLOCK-----
      Version: GnuPG v2
      
      mI0EVi/f0QEEAMdQnJVniOafZQ785EOdrTI0GQuranOyc3NqpNU3YDEfaqD7QMDS
      cb1blIe+G6LdfDqMqWbEqUyBtPSOXChAUryT7KP/Ue+tTTYoEioBW28/HsUKVNX5
      oUkuo71W+UPBq4TTO5QRixMfm7nlDz7xYJCcgX4tbuRqmmWYpmc+4QxFABEBAAG0
      KE9wZW5IUEMgQnVpbGQgU2VydmljZSA8b2JzcnVuQGxvY2FsaG9zdD6IuQQTAQIA
      IwUCVi/f0QIbAwcLCQgHAwIBBhUIAgkKCwQWAgMBAh4BAheAAAoJEMRoB/8mzmiE
      pXkEAJaAou2ihJX6DCUy7q+Keqm5pDgnUZTlyRM6zzHVVXX5HM6K6BmNenXPoXlm
      br3KJQ6Lq5yMQSBAJgXF9j+bfNWTG8xnT+4GXclQl8CDiBCVKdvypoAqo9GBkJFf
      +9UA0AI8rei8R8SSMPDkblpiOXqjn/hS7s5paE47agtuJNq6uI0EVi/f0QEEALz4
      ddFrPWnXJ8kBV52EkdjSoQP+pqf8qevJ9/lcsVfQx+160E6cKx1VLdWMo15D/Tix
      DxwpKaEKGptnD4Owl5VjSB2S+UIgda6Xw4VQTbJH2d5ERXDDsjXk3yN29i+rahKR
      iiq1+9W8fsmUdUzxYA/NYjpVZyxOFW5heiok9bKpABEBAAGInwQYAQIACQUCVi/f
      0QIbDAAKCRDEaAf/Js5ohLB+A/4lNfnjNEYV0vhNV6swRIK8z4CfUFUfVRncLw+R
      WlOv0/bj8DaAD68yhVFuXBThJ1ONG5+9Z04BeXzgYIBgfQ+8tBnT1KTcfD+898qP
      H/jM2HXWGQFie5oEdvnvq21SQG7M87IQjmW9eOzMWfzMGZV+7pJW3xvh8gqxd1Sw
      Or6r3w==
      =mEMt
      -----END PGP PUBLIC KEY BLOCK-----
    owner: root:root
    path: /etc/pki/rpm-gpg/RPM-GPG-KEY-OpenHPC-1
    permissions: '0644'
  - encoding: b64
    content: IwojIEV4YW1wbGUgc2x1cm0uY29uZiBmaWxlLiBQbGVhc2UgcnVuIGNvbmZpZ3VyYXRvci5odG1sCiMgKGluIGRvYy9odG1sKSB0byBidWlsZCBhIGNvbmZpZ3VyYXRpb24gZmlsZSBjdXN0b21pemVkCiMgZm9yIHlvdXIgZW52aXJvbm1lbnQuCiMKIwojIHNsdXJtLmNvbmYgZmlsZSBnZW5lcmF0ZWQgYnkgY29uZmlndXJhdG9yLmh0bWwuCiMKIyBTZWUgdGhlIHNsdXJtLmNvbmYgbWFuIHBhZ2UgZm9yIG1vcmUgaW5mb3JtYXRpb24uCiMKQ2x1c3Rlck5hbWU9anMtc2x1cm0tc2xhc3RpYwpDb250cm9sTWFjaGluZT1zbHVybS10ZXN0CiNDb250cm9sQWRkcj0KI0JhY2t1cENvbnRyb2xsZXI9CiNCYWNrdXBBZGRyPQojClNsdXJtVXNlcj1zbHVybQpTbHVybWRVc2VyPXJvb3QKU2x1cm1jdGxkUG9ydD02ODE3ClNsdXJtZFBvcnQ9NjgxOApBdXRoVHlwZT1hdXRoL211bmdlCiNKb2JDcmVkZW50aWFsUHJpdmF0ZUtleT0KI0pvYkNyZWRlbnRpYWxQdWJsaWNDZXJ0aWZpY2F0ZT0KU3RhdGVTYXZlTG9jYXRpb249L3RtcApTbHVybWRTcG9vbERpcj0vdG1wL3NsdXJtZApTd2l0Y2hUeXBlPXN3aXRjaC9ub25lCk1waURlZmF1bHQ9bm9uZQpTbHVybWN0bGRQaWRGaWxlPS92YXIvcnVuL3NsdXJtY3RsZC5waWQKU2x1cm1kUGlkRmlsZT0vdmFyL3J1bi9zbHVybWQucGlkClByb2N0cmFja1R5cGU9cHJvY3RyYWNrL3BnaWQKI1BsdWdpbkRpcj0KI0ZpcnN0Sm9iSWQ9ClJldHVyblRvU2VydmljZT0xCiNNYXhKb2JDb3VudD0KI1BsdWdTdGFja0NvbmZpZz0KI1Byb3BhZ2F0ZVByaW9Qcm9jZXNzPQojUHJvcGFnYXRlUmVzb3VyY2VMaW1pdHM9CiNQcm9wYWdhdGVSZXNvdXJjZUxpbWl0c0V4Y2VwdD0KI1Byb2xvZz0KI0VwaWxvZz0KI1NydW5Qcm9sb2c9CiNTcnVuRXBpbG9nPQojVGFza1Byb2xvZz0KI1Rhc2tFcGlsb2c9CiNUYXNrUGx1Z2luPQojVHJhY2tXQ0tleT1ubwojVHJlZVdpZHRoPTUwCiNUbXBGUz0KI1VzZVBBTT0KIwojIFRJTUVSUwpTbHVybWN0bGRUaW1lb3V0PTMwMApTbHVybWRUaW1lb3V0PTMwMApJbmFjdGl2ZUxpbWl0PTAKTWluSm9iQWdlPTMwMApLaWxsV2FpdD0zMApXYWl0dGltZT0wCiMKIyBTQ0hFRFVMSU5HClNjaGVkdWxlclR5cGU9c2NoZWQvYmFja2ZpbGwKI1NjaGVkdWxlckF1dGg9CiNTY2hlZHVsZXJQb3J0PQojU2NoZWR1bGVyUm9vdEZpbHRlcj0KU2VsZWN0VHlwZT1zZWxlY3QvbGluZWFyCkZhc3RTY2hlZHVsZT0xCiNQcmlvcml0eVR5cGU9cHJpb3JpdHkvbXVsdGlmYWN0b3IKI1ByaW9yaXR5RGVjYXlIYWxmTGlmZT0xNC0wCiNQcmlvcml0eVVzYWdlUmVzZXRQZXJpb2Q9MTQtMAojUHJpb3JpdHlXZWlnaHRGYWlyc2hhcmU9MTAwMDAwCiNQcmlvcml0eVdlaWdodEFnZT0xMDAwCiNQcmlvcml0eVdlaWdodFBhcnRpdGlvbj0xMDAwMAojUHJpb3JpdHlXZWlnaHRKb2JTaXplPTEwMDAKI1ByaW9yaXR5TWF4QWdlPTEtMAojCiMgTE9HR0lORwpTbHVybWN0bGREZWJ1Zz0zClNsdXJtY3RsZExvZ0ZpbGU9L3Zhci9sb2cvc2x1cm1jdGxkLmxvZwpTbHVybWREZWJ1Zz0zClNsdXJtZExvZ0ZpbGU9L3Zhci9sb2cvc2x1cm1kLmxvZwpKb2JDb21wVHlwZT1qb2Jjb21wL25vbmUKI0pvYkNvbXBMb2M9CiMKIyBBQ0NPVU5USU5HCkpvYkFjY3RHYXRoZXJUeXBlPWpvYmFjY3RfZ2F0aGVyL2xpbnV4CkpvYkFjY3RHYXRoZXJGcmVxdWVuY3k9MzAKIwpBY2NvdW50aW5nU3RvcmFnZVR5cGU9YWNjb3VudGluZ19zdG9yYWdlL2ZpbGV0eHQKQWNjb3VudGluZ1N0b3JhZ2VMb2M9L3Zhci9sb2cvc2x1cm1fam9iYWNjdC5sb2cKI0FjY291bnRpbmdTdG9yYWdlRW5mb3JjZT1hc3NvY2lhdGlvbnMsbGltaXRzCiNBY2NvdW50aW5nU3RvcmFnZVBhc3M9CiNBY2NvdW50aW5nU3RvcmFnZVVzZXI9CiMKI0dFTkVSQUwgUkVTT1VSQ0UKR3Jlc1R5cGVzPSIiCiMKI0NMT1VEIENPTkZJR1VSQVRJT04KUmVzdW1lUHJvZ3JhbT0vdXNyL2xvY2FsL3NiaW4vc2x1cm1fcmVzdW1lLnNoClN1c3BlbmRQcm9ncmFtPS91c3IvbG9jYWwvc2Jpbi9zbHVybV9zdXNwZW5kLnNoClJlc3VtZVJhdGU9MCAjbnVtYmVyIG9mIG5vZGVzIHBlciBtaW51dGUgdGhhdCBjYW4gYmUgY3JlYXRlZDsgMCBtZWFucyBubyBsaW1pdApSZXN1bWVUaW1lb3V0PTYwICNtYXggdGltZSBpbiBzZWNvbmRzIGJldHdlZW4gUmVzdW1lUHJvZ3JhbSBydW5uaW5nIGFuZCB3aGVuIHRoZSBub2RlIGlzIHJlYWR5IGZvciB1c2UKU3VzcGVuZFJhdGU9MCAjbnVtYmVyIG9mIG5vZGVzIHBlciBtaW51dGVkIHRoYXQgY2FuIGJlIHN1c3BlbmRlZC9kZXN0cm95ZWQKU3VzcGVuZFRpbWU9NjAgI3RpbWUgaW4gc2Vjb25kcyBiZWZvcmUgYW4gaWRsZSBub2RlIGlzIHN1c3BlbmRlZApTdXNwZW5kVGltZW91dD0zMCAjdGltZSBiZXR3ZWVuIHJ1bm5pbmcgU3VzcGVuZFByb2dyYW0gYW5kIHRoZSBub2RlIGJlaW5nIGNvbXBsZXRlbHkgZG93bgojQ09NUFVURSBOT0RFUwpOb2RlTmFtZT1jb21wdXRlLTAgU29ja2V0cz0xIENvcmVzUGVyU29ja2V0PTEgU3RhdGU9Q0xPVUQKTm9kZU5hbWU9Y29tcHV0ZS0xIFNvY2tldHM9MSBDb3Jlc1BlclNvY2tldD0xIFN0YXRlPUNMT1VECiNQQVJUSVRJT05TClBhcnRpdGlvbk5hbWU9Z2VuZXJhbCAgTm9kZXM9Y29tcHV0ZS1bMC0xXSBEZWZhdWx0PVlFUyBNYXhUaW1lPUlORklOSVRFIFN0YXRlPVVQIAo=
    owner: root:root
    path: /etc/slurm/slurm.conf 
    permissions: '644'

packages:
  - "epel-release"
  - "openmpi"      
  - "openmpi-devel"       
  - "gcc"           
  - "gcc-c++"       
  - "gcc-gfortran"  
  - "openssl-devel" 
  - "libxml2-devel" 
  - "boost-devel"   
  - "fftw" 
  - "ohpc-slurm-client"

#mounts:
#  - [10.0.0.6:/home,/home,nfs,defaults,0,0]
